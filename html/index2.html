<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Boletos</title>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	
	<link rel="icon" href="../img/icon-hongo.png">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
   <!--CSS-->
   <link rel="stylesheet" href="../css/style2.css">
    <!--FONTS-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital@1&display=swap" rel="stylesheet">
</head>
<body>
<img src="../img/icon-menu-jam.jpeg" alt="menu" class="ham-menu">

<div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="../img/Banner.jpeg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="../img/tokaayz2e1i6398t.jpeg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="../img/26539.jpeg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="../img/bowser.jpg" class="d-block w-100" alt="...">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!--menu-->
<nav class="nav-menu">
  <ul class="nav-ul">
    <li class="nav-item inicio"><img src="../img/icon-mario-saltando.jpg" alt="mario" class="icon-menu"> inicio</li>
    <li class="nav-item boletos"><img src="../img/icon-hongo-verde.jpg" alt="mario" class="icon-menu"> Boletos</li>
    <li class="nav-item galeria"><img src="../img/icon-collage-mario.jpg" alt="mario" class="icon-menu"> Galeria</li>
    <li class="nav-item novedades"><img src="../img/icon-bloque.jpg" alt="mario" class="icon-menu"> Novedades</li>
    <li class="nav-item contacto"><img src="../img/icon-toad.jpg" alt="mario" class="icon-menu"> Contacto</li>
    <li class="nav-item tienda"><img src="../img/icon-star-coin.jpg" alt="mario" class="icon-menu"> Tienda</li>  
  </ul>
</nav>
<div class="contenido">
  <h1 class="title-reserv">RESERVA TUS BOLETOS AQUI</h1>
  <div class="form-container">
    <figure class="fig-img-container">
      <img src="../img/yoshi.gif" alt="Yoshi">
	</figure>
	<form id="reserva-form" method="POST">
		<label for="nombre">Nombre:</label>
		<input type="text" id="nombre" name="nombre" required><br><br>
		<label for="correo">Correo electrónico:</label>
		<input type="email" id="correo" name="correo" required><br><br>
		<label for="cantidad">Cantidad de boletos:</label>
		<input type="number" id="cantidad" name="cantidad" min="1" max="5" required><br><br>
		<input type="submit" value="Reservar" class="btn-enviar-reserva">
	</form>

	<div id="confirmacion"></div>

	<script src="../js/script.js"></script>
	
	<script>
		$(document).ready(function() {
			$("#reserva-form").submit(function(e) {
				e.preventDefault(); // Evita que el formulario se envíe por defecto
				$.ajax({
					url: "reservar.php",
					type: "POST",
					dataType: "json",
					data: $("#reserva-form").serialize(),
					success: function(respuesta) {
						if(respuesta.exito) {
							// La reserva fue exitosa, mostramos la confirmación y los enlaces para descargar los boletos
							var mensaje = "Reserva realizada con éxito. Descarga tus boletos:<br>";
							for(var i = 0; i < respuesta.boletos.length; i++) {
								mensaje += "<a href='" + respuesta.boletos[i] + "' target='_blank'>Boleto " + (i+1) + "</a><br>";
							}
							$("#confirmacion").html(mensaje);
						} else {
							// La reserva no fue exitosa, mostramos el mensaje de error
							$("#confirmacion").html(respuesta.mensaje);
						}
					},
					error: function() {
						// Error en la solicitud AJAX
						$("#confirmacion").html("Error al procesar la solicitud.");
					}
				});
			});
		});
	</script>
</body>
</html>
